//
// AuthenticationAPI.swift
//
// Generated by openapi-generator
// https://openapi-generator.tech
//

import Foundation
import PromiseKit
#if canImport(AnyCodable)
import AnyCodable
#endif

open class AuthenticationAPI {

    /**
     Change password
     
     - parameter changePassword: (body)  
     - returns: Promise<Void>
     */
    open class func changePassword( changePassword: ChangePassword) -> Promise<Void> {
        let deferred = Promise<Void>.pending()
        changePasswordWithRequestBuilder(changePassword: changePassword).execute { result in
            switch result {
            case .success:
                deferred.resolver.fulfill(())
            case let .failure(error):
                deferred.resolver.reject(error)
            }
        }
        return deferred.promise
    }

    /**
     Change password
     - POST /auth/changepassword
     - parameter changePassword: (body)  
     - returns: RequestBuilder<Void> 
     */
    open class func changePasswordWithRequestBuilder(changePassword: ChangePassword) -> RequestBuilder<Void> {
        let localVariablePath = "/auth/changepassword"
        let localVariableURLString = OpenAPIClientAPI.basePath + localVariablePath
        let localVariableParameters = JSONEncodingHelper.encodingParameters(forEncodableObject: changePassword)

        let localVariableUrlComponents = URLComponents(string: localVariableURLString)

        let localVariableNillableHeaders: [String: Any?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<Void>.Type = OpenAPIClientAPI.requestBuilderFactory.getNonDecodableBuilder()

        return localVariableRequestBuilder.init(method: "POST", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters)
    }

    /**
     Forgot password
     
     - parameter username: (query)  
     - returns: Promise<Void>
     */
    open class func forgotPassword( username: String) -> Promise<Void> {
        let deferred = Promise<Void>.pending()
        forgotPasswordWithRequestBuilder(username: username).execute { result in
            switch result {
            case .success:
                deferred.resolver.fulfill(())
            case let .failure(error):
                deferred.resolver.reject(error)
            }
        }
        return deferred.promise
    }

    /**
     Forgot password
     - POST /auth/forgotpassword
     - parameter username: (query)  
     - returns: RequestBuilder<Void> 
     */
    open class func forgotPasswordWithRequestBuilder(username: String) -> RequestBuilder<Void> {
        let localVariablePath = "/auth/forgotpassword"
        let localVariableURLString = OpenAPIClientAPI.basePath + localVariablePath
        let localVariableParameters: [String: Any]? = nil

        var localVariableUrlComponents = URLComponents(string: localVariableURLString)
        localVariableUrlComponents?.queryItems = APIHelper.mapValuesToQueryItems([
            "email": username.encodeToJSON(),
        ])

        let localVariableNillableHeaders: [String: Any?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<Void>.Type = OpenAPIClientAPI.requestBuilderFactory.getNonDecodableBuilder()

        return localVariableRequestBuilder.init(method: "POST", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters)
    }

    /**
     Login user
     
     - parameter loginAuth: (body)  
     - returns: Promise<LoginUser>
     */
    open class func loginUser( loginAuth: LoginAuth) -> Promise<LoginUser> {
        let deferred = Promise<LoginUser>.pending()
        loginUserWithRequestBuilder(loginAuth: loginAuth).execute { result in
            switch result {
            case let .success(response):
                deferred.resolver.fulfill(response.body)
            case let .failure(error):
                deferred.resolver.reject(error)
            }
        }
        return deferred.promise
    }

    /**
     Login user
     - POST /auth/login
     - parameter loginAuth: (body)  
     - returns: RequestBuilder<LoginUser> 
     */
    open class func loginUserWithRequestBuilder(loginAuth: LoginAuth) -> RequestBuilder<LoginUser> {
        let localVariablePath = "/auth/login"
        let localVariableURLString = OpenAPIClientAPI.basePath + localVariablePath
        let localVariableParameters = JSONEncodingHelper.encodingParameters(forEncodableObject: loginAuth)

        let localVariableUrlComponents = URLComponents(string: localVariableURLString)

        let localVariableNillableHeaders: [String: Any?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<LoginUser>.Type = OpenAPIClientAPI.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "POST", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters)
    }

    /**
     Refresh user token
     
     - parameter tokenAuth: (body)  
     - returns: Promise<Token>
     */
    open class func refreshToken( tokenAuth: TokenAuth) -> Promise<Token> {
        let deferred = Promise<Token>.pending()
        refreshTokenWithRequestBuilder(tokenAuth: tokenAuth).execute { result in
            switch result {
            case let .success(response):
                deferred.resolver.fulfill(response.body)
            case let .failure(error):
                deferred.resolver.reject(error)
            }
        }
        return deferred.promise
    }

    /**
     Refresh user token
     - POST /auth/refresh
     - parameter tokenAuth: (body)  
     - returns: RequestBuilder<Token> 
     */
    open class func refreshTokenWithRequestBuilder(tokenAuth: TokenAuth) -> RequestBuilder<Token> {
        let localVariablePath = "/auth/refresh"
        let localVariableURLString = OpenAPIClientAPI.basePath + localVariablePath
        let localVariableParameters = JSONEncodingHelper.encodingParameters(forEncodableObject: tokenAuth)

        let localVariableUrlComponents = URLComponents(string: localVariableURLString)

        let localVariableNillableHeaders: [String: Any?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<Token>.Type = OpenAPIClientAPI.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "POST", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters)
    }

    /**
     Registers user
     
     - parameter registerUser: (body)  
     - returns: Promise<LoginUser>
     */
    open class func registerUser( registerUser: RegisterUser) -> Promise<LoginUser> {
        let deferred = Promise<LoginUser>.pending()
        registerUserWithRequestBuilder(registerUser: registerUser).execute { result in
            switch result {
            case let .success(response):
                deferred.resolver.fulfill(response.body)
            case let .failure(error):
                deferred.resolver.reject(error)
            }
        }
        return deferred.promise
    }

    /**
     Registers user
     - POST /auth/register
     - parameter registerUser: (body)  
     - returns: RequestBuilder<LoginUser> 
     */
    open class func registerUserWithRequestBuilder(registerUser: RegisterUser) -> RequestBuilder<LoginUser> {
        let localVariablePath = "/auth/register"
        let localVariableURLString = OpenAPIClientAPI.basePath + localVariablePath
        let localVariableParameters = JSONEncodingHelper.encodingParameters(forEncodableObject: registerUser)

        let localVariableUrlComponents = URLComponents(string: localVariableURLString)

        let localVariableNillableHeaders: [String: Any?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<LoginUser>.Type = OpenAPIClientAPI.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "POST", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters)
    }

    /**
     Removes a user's account
     
     - parameter id: (path)  
     - returns: Promise<Void>
     */
    open class func removeUser( id: String) -> Promise<Void> {
        let deferred = Promise<Void>.pending()
        removeUserWithRequestBuilder(id: id).execute { result in
            switch result {
            case .success:
                deferred.resolver.fulfill(())
            case let .failure(error):
                deferred.resolver.reject(error)
            }
        }
        return deferred.promise
    }

    /**
     Removes a user's account
     - DELETE /profile/{id}
     - API Key:
       - type: apiKey Authorization 
       - name: CalibrrAuthorizer
     - parameter id: (path)  
     - returns: RequestBuilder<Void> 
     */
    open class func removeUserWithRequestBuilder(id: String) -> RequestBuilder<Void> {
        var localVariablePath = "/profile/{id}"
        let idPreEscape = "\(APIHelper.mapValueToPathItem(id))"
        let idPostEscape = idPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
        localVariablePath = localVariablePath.replacingOccurrences(of: "{id}", with: idPostEscape, options: .literal, range: nil)
        let localVariableURLString = OpenAPIClientAPI.basePath + localVariablePath
        let localVariableParameters: [String: Any]? = nil

        let localVariableUrlComponents = URLComponents(string: localVariableURLString)

        let localVariableNillableHeaders: [String: Any?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<Void>.Type = OpenAPIClientAPI.requestBuilderFactory.getNonDecodableBuilder()

        return localVariableRequestBuilder.init(method: "DELETE", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters)
    }
}
